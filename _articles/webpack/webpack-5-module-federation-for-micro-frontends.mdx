---
title: Micro-Frontendsë¥¼ ìœ„í•œ Webpack 5 Module Federation
date: '2021-06-18 15:06:22'
description: ë§ˆì´í¬ë¡œ í”„ë¡ íŠ¸ì—”ë“œë¥¼ êµ¬í˜„í•˜ëŠ” Webpack 5ì˜ ìƒˆë¡œìš´ ê¸°ìˆ , Module Federationì— ëŒ€í•´ ì„¤ëª…í•©ë‹ˆë‹¤.
---

ì„œë¹„ìŠ¤ì˜ ê·œëª¨ê°€ ì»¤ì§ˆ ìˆ˜ë¡ í•œ ì•±ì— ë“¤ì–´ê°€ëŠ” í”¼ì³ë“¤ì´ ë§ì•„ì§€ê³ , ê·¸ë¡œ ì¸í•´ ê°ê°ì˜ í”¼ì³ë“¤ ì‚¬ì´ì˜ ì˜ì¡´ì„±(dependency)ê°€ ìƒê¸°ê¸° ë§ˆë ¨ì´ë‹¤.

ì´ëŸ¬í•œ ì˜ì¡´ì„±ì„ ì œê±°í•˜ê¸° ìœ„í•´ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©í•  ê²ƒë“¤(ì‘ê²ŒëŠ” ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„, í¬ê²ŒëŠ” ì„œë¹„ìŠ¤ ë‹¨ìœ„)ì„ context independentí•˜ê²Œ êµ¬í˜„í•´ë†“ê³  ì•±ì—ì„œ ë¶ˆëŸ¬ì™€ ì‚¬ìš©í•˜ê³¤ í•œë‹¤.

ë¶„ë¦¬ëœ ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸, ì„œë¹„ìŠ¤ ë‹¨ìœ„ë¡œ ë”°ë¡œ ê°œë°œí•˜ì—¬ ì ìš©í•  ìˆ˜ ìˆì§€ë§Œ ìˆ˜ì •ì‚¬í•­ì„ ë°˜ì˜í•˜ë ¤ë©´ ì•±ì„ ë‹¤ì‹œ **ë¹Œë“œí•˜ê³  ë°°í¬í•˜ëŠ” ê³¼ì •**ì´ í•„ìš”í•˜ë‹¤. ì•„ì£¼ ì‘ì€ ë‹¨ìœ„ì˜ ìˆ˜ì •ì‚¬í•­ì´ ìˆë”ë¼ë„ **ìˆ˜ì‹­ë¶„ì˜ ë°°í¬ ì‹œê°„**ì„ ê±°ì³ì•¼ í•˜ëŠ” ê²ƒì´ë‹¤.

**_ğŸ” ë§Œì•½..._**

ë§ˆë²•ê°™ì´ ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸, ì„œë¹„ìŠ¤ ë‹¨ìœ„ê°€ ê°ê°ì˜ ë¹Œë“œë¥¼ êµ¬ì„±í•˜ê³  ê·¸ ë¹Œë“œë¥¼ ë™ì ìœ¼ë¡œ ìµœìƒë‹¨ Host ì•±ì—ì„œ ë¶ˆëŸ¬ì™€ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ë©´..? **ëŸ°íƒ€ì„ì—!?**

Webpack 5ì˜ Module Federationì€ ê·¸ëŸ° ë§ˆë²•ê°™ì€ ì¼ì„ í˜„ì‹¤í™”í•  ìˆ˜ ìˆë‹¤. ğŸ§™

## Module Federationì´ë€?

[2020ë…„ 10ì›”](https://webpack.js.org/blog/2020-10-10-webpack-5-release/)ì— ê³µì‹ì ìœ¼ë¡œ ë¦´ë¦¬ì¦ˆëœ Webpack 5ëŠ” Webpack 4ë¡œë¶€í„° ì„±ëŠ¥ ê°œì„  ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ì–‘í•œ ìƒˆë¡œìš´ ê¸°ëŠ¥ë“¤ì´ ì¶”ê°€ë˜ì—ˆë‹¤.

Module Federationì€ ì—¬ëŸ¬ ë¶„ë¦¬ëœ ë¹Œë“œë“¤ì´ í•˜ë‚˜ì˜ ì•±ì„ êµ¬ì„±í•  ìˆ˜ ìˆëŠ” Webpack 5ì˜ ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ë‹¤. í•˜ë‚˜ì˜ ì•±ì´ **ë‹¤ë¥¸ ë¹Œë“œì— ìˆëŠ” ì½”ë“œ**ë¥¼ **ë™ì ìœ¼ë¡œ ì‹¤í–‰**ì‹œí‚¬ ìˆ˜ ìˆëŠ” ê¸°ìˆ ì´ë‹¤.

ìš”ì¦˜ í”„ë¡ íŠ¸ì—”ë“œê³„ì—ì„œ í•«í•œ **Micro-Frontends**ì˜ ê·¼ê°„ì´ ë˜ëŠ” ê¸°ìˆ ì´ê¸°ë„ í•˜ë‹¤.

íŠ¹ì • ë¹Œë“œê°€ **Remote ì•±**ì´ ë˜ê³ , ê·¸ ì•±ì—ì„œ **ë‹¤ë¥¸ ë¹Œë“œ**ë“¤ì„ ë™ì ìœ¼ë¡œ ë¶ˆëŸ¬ì™€ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. RemoteëŠ” ê¼­ íŠ¹ì •í•œ í•˜ë‚˜ì˜ ë¹Œë“œë§Œ ë  ìˆ˜ ìˆëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. Federatedëœ ëª¨ë“  ë¹Œë“œë“¤ì´ Remoteê°€ ë  ìˆ˜ ìˆë‹¤.

ì¦‰, **ì–‘ë°©í–¥(Bidirectional)**ìœ¼ë¡œ Module Federationì´ ê°€ëŠ¥í•˜ë‹¤. ì˜ˆë¥¼ ë“¤ë©´, A ë¹Œë“œì—ì„œ B ë¹Œë“œì— ìˆëŠ” ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆê³ , B ë¹Œë“œì—ì„œë„ A ë¹Œë“œì— ìˆëŠ” ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.

ì´ë¡ ì ìœ¼ë¡œëŠ” ì „ë°©í–¥(Omnidirectional)ìœ¼ë¡œë„ ê°€ëŠ¥í•˜ë‹¤ê³  í•œë‹¤.

## ì‚¬ìš© ì˜ˆì‹œ

### í˜ì´ì§€ë³„ ë…ë¦½ì ì¸ ë°°í¬ í”„ë¡œì„¸ìŠ¤ ìš´ì˜í•˜ê¸°

ì‹±ê¸€ í˜ì´ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì‚¬ìš©ë˜ëŠ” í˜ì´ì§€ë“¤ì„ ê°ê°ì˜ ë¶„ë¦¬ëœ ë¹Œë“œë¡œ ë‚˜ëˆ„ê³ , Remote ì•±ì—ì„œ ê·¸ í˜ì´ì§€ë“¤ì„ ë™ì ìœ¼ë¡œ ë¶ˆëŸ¬ì™€ ë Œë”ë§í•œë‹¤.

ì´ ë°©ì‹ì„ ì·¨í•˜ë©´

- ê° í˜ì´ì§€ë“¤ì€ ëª¨ë‘ **ê°ê° ê°œë°œë˜ì–´ ë°°í¬**í•œë‹¤. í•œ í˜ì´ì§€ì˜ ì½”ë“œê°€ ë³€ê²½ë˜ì—ˆë‹¤ê³  ëª¨ë“  í˜ì´ì§€ë¥¼ ë¹Œë“œí•  í•„ìš”ê°€ ì—†ë‹¤.
- Remote ì•±ì€ ë¼ìš°íŒ…ì´ ë³€ê²½ë˜ê±°ë‚˜ ì¶”ê°€ë  ë•Œ ë“± ì œí•œì ì¸ ìƒí™©ì—ë§Œ ë°°í¬í•˜ë©´ ëœë‹¤.

### ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì»¨í…Œì´ë„ˆë¡œ ì‚¬ìš©í•˜ê¸°

ëŒ€ë¶€ë¶„ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬í™” ì‹œì¼œì„œ ì—¬ëŸ¬ ì•±ë“¤ì—ì„œ ê³µìœ ë°›ì•„ ì‚¬ìš©í•˜ëŠ”ë°, ê¸°ì¡´ì—ëŠ” ê³µí†µ ì»´í¬ë„ŒíŠ¸ë“¤ì˜ ë³€ê²½ì‚¬í•­ì„ ë°˜ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” ê·¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ì•±ì„ ë‹¤ì‹œ ë¹Œë“œí•´ì•¼ í•œë‹¤.

ê³µí†µ ì»´í¬ë„ŒíŠ¸ë§Œ ì •ì˜í•´ë‘ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì»¨í…Œì´ë„ˆë¡œì„œ Federateì‹œí‚¨ë‹¤ë©´

- **ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜**ê³¼ **ê³µí†µ ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì»¨í…Œì´ë„ˆ**ë¥¼ ê°ê° **ë¶„ë¦¬í•´ì„œ ê°œë°œí•˜ê³  ë°°í¬í•˜ëŠ” í”„ë¡œì„¸ìŠ¤**ë¥¼ ê°€ì ¸ê°ˆ ìˆ˜ ìˆë‹¤.

## ì‚¬ìš©í•´ë³´ê¸°

ê³ ë§™ê²Œë„ Webpackì—ì„œ ìˆ˜ë§ì€ [Module Federation Examples](https://github.com/module-federation/module-federation-examples)ë¥¼ ë§Œë“¤ì–´ì£¼ì—ˆë‹¤.

### ë ˆí¬ì§€í† ë¦¬ Cloning

```bash
git clone https://github.com/module-federation/module-federation-examples.git
```

ë¨¼ì € ì˜ˆì‹œë“¤ì´ ìˆëŠ” ë ˆí¬ì§€í† ë¦¬ë¥¼ í´ë¡ ë°›ìœ¼ë©´ ìˆ˜ë§ì€ ì˜ˆì‹œ í”„ë¡œì íŠ¸ í´ë”ë“¤ì´ ìˆëŠ”ë°, ê·¸ì¤‘ì—ì„œ `basic-host-remote` í´ë”ì— ìˆëŠ” ì˜ˆì‹œë¥¼ ì‚´í´ë³´ì.

### ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ì„¤ì¹˜

Module Federation ì˜ˆì‹œë“¤ì— ìˆëŠ” ëª¨ë“  í”„ë¡œì íŠ¸ëŠ” íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¡œ `yarn`ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

```bash
# ì˜ì¡´ì„± íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.
yarn
```

ì´ ì˜ˆì œëŠ” `yarn workspace`ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì–´ `lerna bootstrap`ì„ í•  í•„ìš”ê°€ ì—†ë‹¤. `yarn`ë§Œ í•´ì¤˜ë„ í•˜ìœ„ workspaceì˜ ì˜ì¡´ì„± íŒ¨í‚¤ì§€ê°€ í•¨ê»˜ ì„¤ì¹˜ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

### ì•± ì‹¤í–‰

```bash
yarn start
```

ìœ„ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ ì•±ì„ ì‹¤í–‰í•˜ë©´ `localhost:3001` `localhost:3002` ê°ê° app1, app2ê°€ ì‹¤í–‰ëœë‹¤.

![ì‹¤í–‰ í™”ë©´](/assets/articles/module_federation_serve.png)

ìœ„ ì‚¬ì§„ì²˜ëŸ¼ ë‘ ê°œì˜ ë¹Œë“œ(ì•±)ì´ ì‹¤í–‰ë˜ëŠ”ë°, ì‚¬ì§„ì—ì„œ ë³´ë‹¤ì‹œí”¼ app1ì—ì„œ `App 2 Button`ì„ ë³¼ ìˆ˜ ìˆë‹¤. Host ë¹Œë“œì¸ app1ì—ì„œ app2ì— ì •ì˜í•œ ë²„íŠ¼ì„ Module Federation ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ ê°€ì ¸ì˜¨ ê²ƒì´ë‹¤.

## Deep Dive Into Code

### Host ì•±ì˜ webpack.config.js

ì´ ì˜ˆì œì—ì„œ Host ì•±ì€ `app1`ì´ë‹¤. ì¦‰, app1ì´ Module Federationì„ í†µí•´ ë‹¤ë¥¸ ë¹Œë“œë¥¼ ë™ì ìœ¼ë¡œ ë¶ˆëŸ¬ì™€ ì‚¬ìš©í•˜ê³  ìˆëŠ” ë¹Œë“œë¼ê³  ë³´ë©´ ëœë‹¤.

`webpack.config.js`ë¥¼ ì‚´í´ë³´ì.

```jsx
devServer: {
  contentBase: path.join(__dirname, "dist"),
  port: 3001,
},
```

Host ì•±ì¸ `app1`ì€ 3001 í¬íŠ¸ì—ì„œ ì‹¤í–‰ëœë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

---

```jsx
const { ModuleFederationPlugin } = require('webpack').container;
```

ìƒë‹¨ì— requireë¥¼ ì‚¬ìš©í•˜ëŠ” êµ¬ë¬¸ì„ ë³´ë©´, `webpack > container > ModuleFederationPlugin`ì„ ë¶ˆëŸ¬ì˜¤ê³  ìˆë‹¤.

ì—¬ê¸°ì„œ [ModuleFederationPlugin](https://webpack.js.org/plugins/module-federation-plugin/)ì€ Webpackì˜ Module Federationì„ ê°œë°œìê°€ ì‚¬ìš©í•  ë•Œ í•„ìš”í•œ High-level í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œì„œ, ë‚´ë¶€ì (Low-level)ìœ¼ë¡œ `ContainerPlugin`ê³¼ `ContainerReferencePlugin`ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.

```jsx
new ModuleFederationPlugin({
  name: "app1",
  remotes: {
   app2: `app2@${getRemoteEntryUrl(3002)}`,
  },
  shared: { react: { singleton: true }, "react-dom": { singleton: true } },
}),
```

`ModuleFederationPlugin`ì„ ì‚¬ìš©í•˜ëŠ” ë¶€ë¶„ì„ ìì„¸íˆ ì‚´í´ë³´ì.

- `name` : í˜„ì¬ ë¹Œë“œ(Container)ì˜ ì´ë¦„ ì •ì˜
- `remotes` : ì‚¬ìš©í•  Remote ë¹Œë“œì˜ ìœ„ì¹˜ ì •ì˜. ì—¬ê¸°ì„œ app2ëŠ” `app2@http://localhost:3002/remoteEntry.js`ì„. (app2@ + getRemoteEntryUrl í•¨ìˆ˜ ë¦¬í„´ê°’)
- `shared` : ì˜ì¡´ì„± ëª¨ë“ˆì„ ì–´ë–»ê²Œ ê³µìœ í• ì§€ë¥¼ ì •ì˜. `react`ì™€ `react-dom`ì„ ê³µìœ 
  - `singleton: true`ë¥¼ í†µí•´ ë™ì¼í•œ ë²„ì „ì˜ react íŒ¨í‚¤ì§€ë¥¼ ì‹±ê¸€í†¤ìœ¼ë¡œ ê³µìœ 
  - [ë” ë§ì€ shared í”„ë¡œí¼í‹°ì— ê´€ë ¨ ì†ì„± ë³´ëŸ¬ê°€ê¸°](https://webpack.js.org/plugins/module-federation-plugin/#eager)

### Remote ì•±ì˜ webpack.config.js

ì´ ì˜ˆì œì—ì„œ Remote ì•±ì€ `app2` í•˜ë‚˜ë‹¤. Module Federationì„ í†µí•´ Host ë¹Œë“œì—ì„œ ë¶ˆëŸ¬ì™€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¹Œë“œë¼ê³  ë³´ë©´ ëœë‹¤.

`webpack.config.js`ë¥¼ ì‚´í´ë³´ì. (ìœ„ì—ì„œ ì„¤ëª…í•œ ë¶€ë¶„ì€ ì œì™¸)

```jsx
devServer: {
  contentBase: path.join(__dirname, "dist"),
  port: 3002,
},
```

Remote ì•±ì¸ `app2`ëŠ” 3002 í¬íŠ¸ì—ì„œ ì‹¤í–‰ëœë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

```jsx
new ModuleFederationPlugin({
  name: "app2",
  library: { type: "var", name: "app2" },
  filename: "remoteEntry.js",
  exposes: {
    "./Button": "./src/Button",
  },
  shared: { react: { singleton: true }, "react-dom": { singleton: true } },
}),
```

- `name` : í˜„ì¬ ë¹Œë“œ(Container)ì˜ ì´ë¦„ ì •ì˜
- `library.type` : ë¼ì´ë¸ŒëŸ¬ë¦¬ íƒ€ì… ([Webpack ë¬¸ì„œ ì°¸ê³ ](https://webpack.js.org/configuration/output/#outputlibrarytype))
- `library.name` : ë¼ì´ë¸ŒëŸ¬ë¦¬ ì´ë¦„
- `filename` : ì™¸ë¶€ë¡œ exposeí•  íŒŒì¼ ì´ë¦„, webpack.config.jsì— `output.path` ë””ë ‰í„°ë¦¬ì— ëŒ€í•œ ìƒëŒ€ ê²½ë¡œ ê¸°ë°˜ì„
  - ì´ ì˜ˆì œì—ì„œëŠ” app2ì˜ `Button`ì„ ì™¸ë¶€ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ exposeí–ˆë‹¤.
- `exposes` : exposeë (ì™¸ë¶€ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”) ëª¨ë“ˆë“¤ ì •ì˜

### Host ì•±ì—ì„œ ì‚¬ìš©í•œ Remote ì•±ì˜ ë²„íŠ¼

```jsx
import React from 'react';

const RemoteButton = React.lazy(() => import('app2/Button'));

const App = () => (
  <div>
    <h1>Basic Host-Remote</h1>
    <h2>App 1</h2>
    <React.Suspense fallback="Loading Button">
      <RemoteButton />
    </React.Suspense>
  </div>
);

export default App;
```

app2ì— ìˆëŠ” ë²„íŠ¼ì„ Lazy Loadí•œ ë’¤, ì‹¤ì œ ë Œë”ë§ ì‹œ `React.Suspense`ë¡œ ê°ì‹¸ë‘ì–´ ë²„íŠ¼ì´ ë¶ˆëŸ¬ì™€ì§ˆ ë•Œê¹Œì§€ `Loading Button`ì´ë¼ëŠ” ë¬¸êµ¬ê°€ ì¶œë ¥ë˜ê²Œ êµ¬í˜„í•œ ì˜ˆì‹œì´ë‹¤.

## ë§ˆì¹˜ë©°

Webpack 5ì˜ Module Federaton ê¸°ìˆ ì€ í”„ë¡ íŠ¸ì—”ë“œ ë¶„ì•¼ì—ì„œ ë§ì€ ê°œë°œìë“¤ì´ ê°ˆë§í–ˆë˜ ê¸°ëŠ¥ì¸ ë§Œí¼, í”„ë¡ íŠ¸ì—”ë“œ ì—…ê³„ì—ì„œ ê¾¸ì¤€íˆ ê´€ì‹¬ì„ ë°›ì„ ê²ƒìœ¼ë¡œ ì˜ˆìƒëœë‹¤. ì°¾ì•„ë³´ë‹ˆ Module Federationì´ ì ìš©ëœ Remote ì•±ì„ [AWS S3ì™€ ê°™ì€ í´ë¼ìš°ë“œ ì„œë²„ì— ì €ì¥í•´ë‘ê³  ë™ì ìœ¼ë¡œ ë°›ì•„ì˜¤ëŠ” ê¸°ìˆ ](https://medium.com/swlh/deploying-micro-frontends-to-aws-step-by-step-using-react-webpack-5-and-module-federation-3f97f6f1658c)ë„ ìˆê³ , ë‹¤ë°©ë©´ìœ¼ë¡œ í”„ë¡œë•ì…˜ì— ì ìš©ë˜ë©´ ë˜ê²Œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ë  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.

í•˜ì§€ë§Œ ì•„ì§ ë¦´ë¦¬ì¦ˆëœì§€ ì–¼ë§ˆ ë˜ì§€ ì•Šì€ ê¸°ìˆ ì´ê¸°ë„ í•˜ê³ , ë‚¯ì„  ê¸°ìˆ ì´ë¼ ê·¸ëŸ°ì§€ ì‹¤ì œ í”„ë¡œë•íŠ¸ì— ë„ì…í•˜ê¸° ì „ê¹Œì§€ ë§ì€ ê²½í—˜ë“¤ì´ ëˆ„ì ë˜ì–´ì•¼ í•  ê²ƒ ê°™ë‹¤.

## ì°¸ê³ 

- [https://webpack.js.org/concepts/module-federation/](https://webpack.js.org/concepts/module-federation/)
- [https://indepth.dev/posts/1173/webpack-5-module-federation-a-game-changer-in-javascript-architecture](https://indepth.dev/posts/1173/webpack-5-module-federation-a-game-changer-in-javascript-architecture)
- [https://betterprogramming.pub/micro-frontends-using-webpack-5-module-federation-3b97ffb22a0d](https://betterprogramming.pub/micro-frontends-using-webpack-5-module-federation-3b97ffb22a0d)
